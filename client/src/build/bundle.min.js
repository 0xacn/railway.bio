!function(){"use strict";var e={Union:[{name:"Union Station",id:"UN"}],"Union Pearson":[{name:"Pearson Airport",id:"PE"}],"Lakeshore East":[{name:"Whitby",id:"WH"},{name:"Ajax",id:"AJ"},{name:"Pickering",id:"PI"},{name:"Rouge Hill",id:"RO"},{name:"Guildwood",id:"GU"},{name:"Eglinton",id:"EG"},{name:"Scarborough",id:"SC"},{name:"Danforth",id:"DA"}],Stouffville:[{name:"Old Elm",id:"LI"},{name:"Stouffville",id:"ST"},{name:"Mount Joy",id:"MJ"},{name:"Markham",id:"MR"},{name:"Centennial",id:"CE"},{name:"Unionville",id:"UI"},{name:"Milliken",id:"MK"},{name:"Agincourt",id:"AG"},{name:"Kennedy",id:"KE"}],"Richmond Hill":[{name:"Bloomington",id:"BM"},{name:"Gormley",id:"GO"},{name:"Richmond Hill",id:"RI"},{name:"Langstaff",id:"LA"},{name:"Old Cummer",id:"OL"},{name:"Oriole",id:"OR"}],Barrie:[{name:"Allendale Waterfront",id:"AD"},{name:"Barrie South",id:"BA"},{name:"Bradford",id:"BD"},{name:"East Gwillimbury",id:"EA"},{name:"Newmarket",id:"NE"},{name:"Aurora",id:"AU"},{name:"King City",id:"KC"},{name:"Maple",id:"MP"},{name:"Rutherford",id:"RU"},{name:"Downsview Park",id:"DO"}],"Lakeshore West":[{name:"Exhibition",id:"EX"},{name:"Mimico",id:"MI"},{name:"Long Branch",id:"LO"},{name:"Port Credit",id:"PO"},{name:"Clarkson",id:"CL"},{name:"Oakville",id:"OA"},{name:"Bronte",id:"BO"},{name:"Appleby",id:"AP"},{name:"Burlington",id:"BU"},{name:"Aldershot",id:"AL"},{name:"Hamilton",id:"HA"},{name:"West Harbour",id:"WR"},{name:"St. Catharines",id:"SCTH"},{name:"Niagara Falls",id:"NI"}],Milton:[{name:"Kipling",id:"KP"},{name:"Dixie",id:"DI"},{name:"Cooksville",id:"CO"},{name:"Erindale",id:"ER"},{name:"Streetsville",id:"SR"},{name:"Meadowvale",id:"ME"},{name:"Lisgar",id:"LS"},{name:"Milton",id:"ML"}],Kitchener:[{name:"Bloor",id:"BL"},{name:"Weston",id:"WE"},{name:"Etobicoke North",id:"ET"},{name:"Malton",id:"MA"},{name:"Bramalea",id:"BE"},{name:"Brampton",id:"BR"},{name:"Mount Pleasant",id:"MO"},{name:"Georgetown",id:"GE"},{name:"Acton",id:"AC"},{name:"Guelph Central",id:"GL"},{name:"Kitchener",id:"KI"}]};const s=(e,n,i)=>{let a=document.createElement(e);return n&&n.split(";").forEach(e=>{e&&(e=e.split("="),a.setAttribute(e[0].trim(),e[1].trim()))}),a.innerHTML=i||"",a};const r=document.querySelector.bind(document);function d(e){e?(document.body.classList.add("loading"),r("#stationSelect").disabled=!0):(document.body.classList.remove("loading"),r("#stationSelect").disabled=!1)}var n=r("#stationSelect");for(const m in e){var i=document.createElement("optgroup");i.setAttribute("label",m);for(const l of e[m]){var a=document.createElement("option");a.innerHTML=l.name,a.value=l.id,i.append(a)}n.append(i)}n.oninput=async e=>{await t(e.target.value)},t("UN");const o=new class{constructor(e,n){this.outer=e,this.settings=n,this.inner=s("div","class=animator-inner"),this.outer.replaceChildren(this.inner)}async animateTo(e,n=0){var i,a=this.getHTMLDimensions(e);return this.outer.style.width=Math.max(a.width,this.settings.minWidth||0)+"px",this.outer.style.height=a.height+"px",n&&(i=n,await new Promise(e=>setTimeout(e,i))),this.outer.replaceChildren(e),this.inner=e}async animateAppend(e){var n=this.getHTMLDimensions(e),i=this.getHTMLDimensions(this.inner);this.outer.style.width=Math.max(n.width-n.x+(i.width-i.x),this.settings.minWidth||0)+"px",this.outer.style.height=n.height+i.height+(this.settings.padding??0)+"px",console.log(e.children),this.inner.append(...e.children)}async setInner(e){await this.animateTo(e,this.settings.transitionDuration||0)}getHTMLDimensions(e){let n;e instanceof Element?n=e.cloneNode(!0):(n=s("div")).append(...[...e.children].map(e=>e.cloneNode(!0))),n.classList.add("invisible"),document.body.append(n);e=n.getBoundingClientRect();return n.classList.remove("invisible"),n.remove(),e}}(r(".departure-wrapper"),{padding:8});async function t(e){var n,i,e=await(async e=>{d(!0);try{var n=await(await fetch("https://api.railway.bio/departures/"+e)).json();return d(!1),n}catch(e){r(".loader").classList.add("error"),console.error(e),d(!1)}})(e),a=new DocumentFragment;o.setInner(s("div","class=animator-inner"));for([n,i]of e.entries()){var t=function(e,n){var n=s("div",`class=train-departure;style=--i:${45*n}ms`),i=s("div","class=left"),a=s("div","class=right"),t=s("h2","class=location",e.service),r=s("h3","class=scheduled",e.scheduledTime),d=s("p",null,"on platform"+(0<e.platform.split("&").length?"s":"")),o=s("h3","class=platforms",e.platform);i.append(t),a.append(r),e.platform&&"-"!==e.platform&&a.append(d,o);return n.append(i,a),n}(i,n);a.append(t)}o.animateAppend(a),e.length||(o.inner.innerHTML="No departures for this station")}o.setInner(s("div","class=animator-inner"))}();
